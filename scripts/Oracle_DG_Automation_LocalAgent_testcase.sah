/*************************************************************************
 ** CompanyName : Sanovi Technologies Ltd.
 ** Application Name : DRM 
 ** Objective : This script contains all the local agent test cases which are the part of  Oracle_DG solution. 
 ** AuthorName : Automation Team
 ** Created Date : June 2013
 ** Updated date : Dec 2015
 ************************************************************************/

_log("=================================Pre-Condition===================================", "Custom1");

//don't change the below line.
_include("../Library/Solution_Signature/Include/Oracle_DG_Include.sah");

// mentioned the correct parameter file name which user are going to execute within the "" code.
_include("../conf/DRMInstallation_Parameter.sah");
_include("../Library/Common/CommonRepository/CommonDRM_ObjRepository.sah");
_include("../Library/Common/CommonRepository/CommonGUINavigation_ObjRepository.sah");
_include("../Library/Common/CommonRepository/GroupOperation_ObjRepository.sah");
_include("../Library/Solution_Signature/Oracle_DG/ObjectRepository/OracleDG_ObjectRepository.sah");
_include("../conf/Oracle_Log_DG/Oracle_DG_Local_Agent_Parameter.sah");
_include("../conf/Oracle_Log_DG/UserSelected_Oracle_Testcase.sah");
_include("../Library/Common/Operation_On_FG/Common_GUI_Navigation.sah");
_include("../Library/Validation_Manager/ObjectRepository/Validation_Manager_ObjectRepository.sah");
_include("../Library/Validation_Manager/Validation_Manager.sah");
// *************************************************************************************************************************************************
// Notes: below test cases for Local agent


WorkFlow_copy_001();
//NC_Modify_WorkflowXML_OracleDg();
SO_Modify_WorkflowXML_OracleDg();
SB_Modify_WorkflowXML_OracleDg();

Agent_UnInstllation_001();

AgentBuild_Copy_into_AgentHost_PR();
AgentBuild_Copy_into_AgentHost_DR();
Copy_Property_file();

Update_PropertyFile_LocalAgent_PR();
Update_PropertyFile_LocalAgent_DR();
  

if ($OS_Authentication == "Y") {
	Oracle_DG_Agent_Instllation_001();
} else {
	Install_Local_Agent_SilentMode_PR();
	Install_Local_Agent_SilentMode_DR();
}

Login_001();


_log("=================================Test========================================", "Custom1");
if ($g_executeOracleDGAll == "Y" || $g_siteOracleDg == "Y") {
	var $test1 = _testcase("Site_0003", "Create New Site");
	$test1.start();
	Site_0003();
	$test1.end();
}

if ($g_executeOracleDGAll == "Y" || $g_componentLocalDiscoveryOracleDg == "Y") {
	var $test2 = _testcase("Object_Manager/ Common/ Components/ Component_04", "Create New Component");
	$test2.start();
	OracleDG_Component_Local_Discovery_0002();
	$test2.end();
}

if ($g_executeOracleDGAll == "Y" || $g_datasetDiscoveryOracleDg == "Y") {
	var $test3 = _testcase("Object_Manager/Dataset/Oracle/OraDiscovery_0006 ", "Dataset Discovery");
	$test3.start();
	OracleDG_Dataset_Discovery_0002();
	$test3.end();
}


if ($g_executeOracleDGAll == "Y" || $g_datasetAutoDiscoveryOracleDg == "Y") {
	var $test4 = _testcase("Object_Manager/Dataset/Oracle/Ora_Auto_DatasetDiscovery0002", "Oracle Auto Dataset Discovery");
	$test4.start();
	OracleDG_Auto_DatasetDiscovery0003();
	$test4.end();
}

if ($g_executeOracleDGAll == "Y" || $g_protectionSchemeDiscoveryOracleDg == "Y") {
	var $test5 = _testcase("Object_Manager/ProtectionScheme/DataGaurd/OracleDG_Discovery0002", "Protection Scheme Discovery");
	$test5.start();
	OracleDG_Protectionscheme_Discovery_0004();
	$test5.end();
}


if ($g_executeOracleDGAll == "Y" || $g_protectionSchemeDetailsOracleDg == "Y") {
	var $test6 = _testcase("Object_Manager/ProtectionScheme/DataGaurd/OracleDG_Discovery0003", "DataGaurd Configured Information");
	$test6.start();
	OracleDG_DataGuard_Configured_information0005();
	$test6.end();
}

if ($g_executeOracleDGAll == "Y" || $g_groupCreationOracleDg == "Y") {
	var $test7 = _testcase("Continuity_Manager/Common/FG/Group/GroupCreation_0001", "OracleDG Group Creation");
	$test7.start();
	OracleDG_GroupCreation_0006();
	$test7.end();
}

if ($g_executeOracleDGAll == "Y" || $g_moveGroupToManageOracleDg == "Y") {
	var $test8 = _testcase("Continuity_Manager/Common/FG/Group/GroupCreation_0006", "Move Group to Manage");
	$test8.start();
	OracleDG_Move_Group_Manage_0007();
	$test8.end();
}

if ($g_executeOracleDGAll == "Y" || $g_changeContinuityStateOracleDg == "Y") {
	var $test9 = _testcase("Continuity_Manager/Common/FG/Manage/Change_Continuity_State_0001", "Change Continuity Status");
	$test9.start();
	OracleDG_Change_Continuity_State_0008();
	$test9.end();
}

if ($g_executeOracleDGAll == "Y" || $g_postGroupCreationOracleDg == "Y") {
	var $test10 = _testcase("Object_Manager/ProtectionScheme/DataGaurd/OracleDG_Discovery_0010", "Post Group Creation");
	$test10.start();
	OracleDG_Post_Group_Creation_0009();
	$test10.end();
}


if ($g_executeOracleDGAll == "Y" || $g_importFOOracleDg == "Y") {
	var $test10_1 = _testcase("Import FO WF", "Import FO");
	$test10_1.start();
	OracleDG_Import_FO_0010();
	$test10_1.end();
}
/*
if ($g_executeOracleDGAll == "Y" || $g_componentStatusOracleDg == "Y") {
	var $test11 = _testcase("Object_Manager/ Common/ Components/ Subsystem_Moinitoring_0001 ", "Component Status");
	$test11.start();
	OracleDG_Component_Status_0011();
	$test11.end();
}

if ($g_executeOracleDGAll == "Y" || $g_datasetStatusOracleDg == "Y") {
	var $test12 = _testcase("Object_Manager/Dataset/Oracle/Ora_Auto_DatasetDiscovery0009", "Dataset Status");
	$test12.start();
	OracleDG_Dataset_status_0012();
	$test12.end();
}
*/

if ($g_executeOracleDGAll == "Y" || $g_continuityStatusOracleDg == "Y") {
	var $test14 = _testcase("Continuity_Manager/Common/FG/Monitor/MON_0002", "Continuity Status");
	$test14.start();
	OracleDG_Contiunity_Status_0014();
	$test14.end();
}


if ($g_executeOracleDGAll == "Y" || $g_importNCOracleDg == "Y") {
	var $test16 = _testcase("Site_0003", "Import NC");
	$test16.start();
	Add_RAL_OracleDG_NC($groupName);
	$test16.end();
}

if ($g_executeOracleDGAll == "Y" || $g_startNCOracleDg == "Y") {
	var $test18 = _testcase("Continuity_Manager/Common/FG/Manage/NormalCopy_0001", "Start NC");
	$test18.start();
	OracleDG_Start_NormalCopy_0015();
	$test18.end();
}

if ($g_executeOracleDGAll == "Y" || $g_monitorRelationshipOracleDg == "Y") {
	var $test19 = _testcase("Site_0003", "Monitor Relationship");
	$test19.start();
	OracleDG_Monitor_Relationship_0016();
	$test19.end();
}


if ($g_executeOracleDGAll == "Y" || $g_replicationNCOracleDg == "Y") {
	var $test23 = _testcase("Continuity_Manager/Template/Oracle_Log/OracleDG/OracleDG_ProtectionMonitoring0001", "NC Replication");
	$test23.start();
	_wait(10000);
	OracleDG_NC_Replication_0018();
	$test23.end();
}

if ($g_executeOracleDGAll == "Y" || $g_rpoNCOracleDg == "Y") {
	var $test24 = _testcase("Continuity_Manager/Common/FG/Monitor/RPO_0008", "NC RPO");
	$test24.start();
	OracleDG_NC_RPO_0019();
	$test24.end();
}

if ($g_executeOracleDGAll == "Y" || $g_rtoNCOracleDg == "Y") {
	var $test25 = _testcase("Continuity_Manager/Common/FG/Monitor/RTO_0004", "NC RTO");  
	$test25.start();
	OracleDG_NC_RTO_0020();
	$test25.end();
}

if ($g_executeOracleDGAll == "Y" || $g_importSOSBOracleDg == "Y") {
	var $test26 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0007", "Import SO & SB");
	$test26.start();
	OracleDG_Import_SOSB_0021();
	$test26.end();
}

/*if ($g_executeOracleDGAll == "Y" || $g_protectionSchemeStatusOracleDg == "Y") {
	var $test13 = _testcase("Object_Manager/ProtectionScheme/DataGaurd/OracleDG_Discovery0011", "Protection Scheme Status");
	$test13.start();
	OracleDG_Protectionscheme_status_0013();
	$test13.end();
}*/

//Raised the bug Redmine #31257  - Closed  

if ($g_executeOracleDGAll == "Y" || $g_groupSnapshotOracleDg == "Y") {
	var $test22 = _testcase("ContinuityDetails", "ContinuityDetails");
	$test22.start();
	OracleDG_NC_Continuity_Workflows_0017();
	$test22.end();
}

if ($g_executeOracleDGAll == "Y" || $g_stopNCOracleDg == "Y") {
	var $test27 = _testcase("Site_0003", "Stop NC");
	$test27.start();
	OracleDG_Stop_NC_0022();
	$test27.end();
}

if ($g_executeOracleDGAll == "Y" || $g_startSOOracleDg == "Y") {
	var $test28 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0011", "Start SO");
	$test28.start();
	OracleDG_Start_SO_0023();
	$test28.end();
}

if ($g_executeOracleDGAll == "Y" || $g_SOExecutionOracleDg == "Y") {
	var $test29 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0012", "SO Execution");
	$test29.start();
	OracleDG_SO_Execution_0024();
	$test29.end();
}

if ($g_executeOracleDGAll == "Y" || $g_replicationSOOracleDg == "Y") {
	var $test30 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0013", "SO Replication");
	$test30.start();
	OracleDG_SO_Verify_Continuity_Status_0025();
	$test30.end();
}


if ($g_executeOracleDGAll == "Y" || $g_importRNCOracleDg == "Y") {
	var $test31 = _testcase("Site_0003", "Import RNC");
	$test31.start();
	OracleDG_Import_RNC_0055();	
	$test31.end();
}

if ($g_executeOracleDGAll == "Y" || $g_startRNCOracleDg == "Y") {
	var $test32 = _testcase("Continuity_Manager/Template/Oracle_Log/Monitor/OraLog_RNC_0001", "Start RNC");
	$test32.start();
	OracleDG_Start_RNC_0026();
	$test32.end();
}

if ($g_executeOracleDGAll == "Y" || $g_groupInformaitionRNCOracleDg == "Y") {
	var $test33 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0022", "RNC Group Information Monitor");
	$test33.start();
	OracleDG_RNC_ExecutionStatus_0027();
	$test33.end();
}
  

if ($g_executeOracleDGAll == "Y" || $g_rpoRNCOracleDg == "Y") {
	var $test35 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0023", "RNC RPO Monitor");
	$test35.start();
	OracleDG_RNC_Rpo_Monitor_0029();
	$test35.end();
}

if ($g_executeOracleDGAll == "Y" || $g_replicationRNCOracleDg == "Y") {
	var $test36 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0024", "RNC Replication");
	$test36.start();
	OracleDG_RNC_Replication_0030();
	$test36.end();
}
//bug raised Issue #31268 - Closed
if ($g_executeOracleDGAll == "Y" || $g_groupSnapshotOracleDg == "Y") {
	var $test34 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0021", "RNC Group SnapShot Monitor");
	$test34.start();
	OracleDG_RNC_Continuity_Workflows_0028();
	$test34.end();
} 
if ($g_executeOracleDGAll == "Y" || $g_stopRNCOracleDg == "Y") {
	var $test37 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0033", "Stop RNC");
	$test37.start();
	OracleDG_Stop_RNC_0031();
	$test37.end();
}

if ($g_executeOracleDGAll == "Y" || $g_startSBOracleDg == "Y") {
	var $test38 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0034", "Start SB");
	$test38.start();
	OracleDG_Start_SB_0032();
	$test38.end();
}

if ($g_executeOracleDGAll == "Y" || $g_SBExecutionOracleDg == "Y") {
	var $test39 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0035", "SB Execution");
	$test39.start();
	OracleDG_SB_Execution_0033();
	$test39.end();
}

if ($g_executeOracleDGAll == "Y" || $g_monitorManageSBOracleDg == "Y") {
	var $test40 = _testcase("Continuity_Manager/Common/FG/Tests/SOSB_0038", "SB Monitor Manage");
	$test40.start();
	OracleDG_SB_ContinuityWorkflows_0034(); 
	$test40.end();
}

///////////////////DRYRUN REPORT SCRIPT/////////////////////////////////////

if ($g_executeOracleDGAll == "Y" || $g_ORACLE_DG_Dryrun_Report == "Y") {
	var $test26 = _testcase("Continuity_Manager/Common/FG/DryRun_Report_Function", "verify Dry run reports");
	$test26.start();
	ORACLE_DG_Dryrun_Report_Testcase();
    $test26.end();
}
/*
if ($g_executeOracleDGAll == "Y" || $g_replicaionStopOracleDg == "Y") {
	var $test43 = _testcase("Continuity_Manager/ Template/ Oracle_Log/ OracleDG/ OracleDG_Manage_Replication in GUI ", "Stop Replication");
	$test43.start();
	OracleDG_Stop_replication_0037();
	$test43.end();
}

if ($g_executeOracleDGAll == "Y" || $g_replicaionStartOracleDg == "Y") {
	var $test44 = _testcase("Continuity_Manager/ Template/ Oracle_Log/ OracleDG/ OracleDG_Manage_Replication in GUI", "Start Replication");
	$test44.start();
	OracleDG_Start_replication_0038();
	$test44.end();
}

if ($g_executeOracleDGAll == "Y" || $g_localStopOracleDgAgent == "Y") {
	var $test41 = _testcase("Continuity_Manager/Template/Oracle_Log/OracleDG/OracleDG_Object_Health_Events0001", "Stop_OracleDG_Agent");
	$test41.start();
	OracleDG_Local_Stop_OracleDG_Agent_0039();
	$test41.end();
}


if ($g_executeOracleDGAll == "Y" || $g_localStartOracleDgAgent == "Y") {
	var $test42 = _testcase("Continuity_Manager/Template/Oracle_Log/OracleDG/OracleDG_Object_Health_Events0001", "Start_OracleDG_Agent");
	$test42.start();
	OracleDG_Local_Start_OracleDG_Agent_0038();
	$test42.end();
}*/

if($g_executeOracleDGAll == "Y" || $g_Validation_Manager_Execution == "Y"){
	var $test50 = _testcase("APP_PFR/APP_PFR_Group_Health_Status_0101","Validation Manager Execution");
	$test50.start();
	Validation_Manager_Execution();
	$test50.end();
	}
/*
if ($g_executeOracleDGAll == "Y" || $g_replicaionStartOracleDg == "Y") {
	var $test44_1 = _testcase("Continuity_Manager/ Template/ Oracle_Log/ OracleDG/ OracleDG_Manage_Replication ", "Start NC and Stop NC");
	$test44_1.start();
	OracleDG_StartNC_StopNC_0038_1();
	$test44_1.end();
}
	

if ($g_executeOracleDGAll == "Y" || $g_startFOOracleDg == "Y") {
	var $test45 = _testcase("Continuity_Manager/ Common/ FG/ Monitor/ Failover_0001 ", "Start FO");
	$test45.start();
	OracleDG_Start_FO_0039();
	$test45.end();
}

if ($g_executeOracleDGAll == "Y" || $g_FOExecutionOracleDg == "Y") {
	var $test46 = _testcase("Continuity_Manager/ Common/ FG/ Monitor/ Failover_0001 ", "FO Execution");
	$test46.start();
	OracleDG_FO_execution_0040();
	$test46.end();
}

if ($g_executeOracleDGAll == "Y" || $g_continuityStatusFOOracleDg == "Y") {
	var $test47 = _testcase("Continuity_Manager/Common/FG/Monitor/Failover_0007", "Continuity Status During FO");
	$test47.start();
	OracleDG_Continuity_Status_FO_0041();
	$test47.end();
}

if ($g_executeOracleDGAll == "Y" || $g_rpoFOOracleDg == "Y") {
	var $test48 = _testcase("Continuity_Manager/Common/FG/Monitor/Failover_0003", "RPO during FO");
	$test48.start();
	OracleDG_FO_RPO_0042();
	$test48.end();
}

if ($g_executeOracleDGAll == "Y" || $g_monitorManageFOOracleDg == "Y") {
	var $test49 = _testcase("Continuity_Manager/ Common/ FG/ Monitor/ Failover_0006 ", "FO Monitor Manage");
	$test49.start();
	OracleDG_FO_Monitor_Manage_0043();
	$test49.end();
}
*/
_log("================================Post-Condition================================== ", "Custom1");

Logout_001();
